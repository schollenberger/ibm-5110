0010 REM *** SIO8IO  *** READ/WRITE TO SERIAL PORT
0020 REM 2025-07-17 WERNER SCHOLLENBERGER
0030 REM ****
0040 DIM X$2(256)
0045 REM A$ - ANSWER,  M$ - STORED ANSER , B$ - SERIAL DATA
0050 DIM A$16,B$128,M$16
0060 PRINT 'INITIALIZING SERIAL PORT...'
0070 OPEN FL8,'A08',OUT
0080 PRINT FL8,'R/9600,I/32,O/32,F/C,K/I,N/1E,E/1E'
0090 CLOSE FL8
0095 OPEN FL2,'A02',IN
0097 OPEN FL4,'A04',OUT
0100 PRINT 'SERIAL PORT INITIALIZED AND INPUT FILE OPEN'
0105 M$='READ'
0110 PRINT 'READ / SEND / END  (';M$;')?'
0120 INPUT A$
0124 IF A$'?' GOTO 130
0126 A$=M$
0130 IF STR(A$,1,1)='R' GOTO 150
0132 IF STR(A$,1,1)='S' GOTO 220
0133 IF STR(A$,1,1)='E' GOTO 340
0134 PRINT 'TYPE "R" OR "S"'
0140 GOTO 110
0150 REM **** READ ****
0155 M$='READ'
0160 PRINT 'WAITING FOR DATA ON SERIAL PORT...'
0165 B$=''
0170 GET FL2,B$
0180 PRINT B$
0190 GOTO 110
0220 REM ***** SEND *****
0225 M$='SEND'
0230 PRINT 'SENDING BINARY DATA TO SERIAL PORT...'
0240 REM PAUSE
0260 REM CURRENTLY ONLY HEX INPUT IS SUPPORTED
0280 REM PRINT '.';
0290 REM SHOULD TRANSLATE TO 'HALLO DU DA'
0300 B$='C8819393964084A4408481'
0310 GOSUB 400
0320 GOTO 110
0340 REM **** FINISH ****
0350 PRINT 'EXITING...'
0360 CLOSE FL2
0370 CLOSE FL4
0380 PRINT 'DONE'
0390 STOP
0400 REM *** CONVERT TO HEX AND SEND TO SERIAL PORT
0410 REM WRITEFILE FLS,'F'
0420 REM OPEN FL4,'A04',OUT
0430 FOR I=0 TO LEN(B$)-1 STEP 2
0440 PRINT FL4,STR(B$,I+1,2);
0450 NEXT I
0460 PRINT FL4,'151E0D'
0470 PRINT
0480 REM CLOSE FL4
0490 RETURN
